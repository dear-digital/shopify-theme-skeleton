<script src="{{ 'reviews-slider.js' | asset_url }}" defer></script>

<style>
  .reviews-slider-container {
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    padding: 0 40px;
  }

  .reviews-slider-content {
    text-align: center;
  }

  .review-slide {
    display: none;
  }

  .review-content {
    font-size: 24px;
    line-height: 1.5;
    margin-bottom: 20px;
    font-style: italic;
  }

  .review-author {
    font-size: 18px;
    font-weight: bold;
  }

  .nav-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
  }

  .prev-button {
    left: 0;
  }

  .next-button {
    right: 0;
  }

  .slider-dots {
    display: flex;
    justify-content: center;
    margin-top: 20px;
  }

  .slider-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: #ccc;
    margin: 0 5px;
    display: none;
  }

  .slider-dot.active {
    background-color: #333;
  }

  @media (max-width: 767px) {
    .reviews-slider-container {
      padding: 0 15px;
    }

    .review-content {
      font-size: 18px;
    }

    .review-author {
      font-size: 16px;
    }

    .review-content,
    .review-author {
      display: block;
      text-align: center;
    }
  }

  @media (max-width: 1439px) {
    .nav-button {
      display: none;
    }
  }
</style>

<div class="reviews__container {{ section.settings.tw-reviews__container }}">
  <div class="reviews__wrapper {{ section.settings.tw-reviews__wrapper }}">
    <div class="reviews__content {{ section.settings.tw-reviews__content }}">
      <div class="reviews__overline-heading {{ section.settings.tw-reviews__overline-heading }}">
        <div class="reviews__logo-wrapper {{ section.settings.tw-reviews__logo-wrapper }}">
          <div class="reviews__logo-icon {{ section.settings.tw-reviews__logo-icon-wrapper }}">
            {% if section.settings.logo != blank %}
              {{
                section.settings.logo
                | image_url: '50x50'
                | image_tag: class: section.settings['tw-reviews__logo-img']
              }}
            {% else %}
              {% render 'icon-google' %}
            {% endif %}
          </div>
          <div class="reviews__logo-text {{ section.settings.tw-reviews__logo-text }}">
            {{ section.settings.overline_heading }}
          </div>
        </div>
        <h3 class="reviews__heading {{ section.settings.tw-reviews__heading }}">
          {{ section.settings.heading }}
        </h3>
      </div>
      {% comment %} Add Swiper Container Here {% endcomment %}
      <div class="reviews-slider-container">
        <reviews-slider>
          <button class="nav-button prev-button">&lt;</button>
          <div class="reviews-slider-content">
            {% for block in section.blocks %}
              <div class="review-slide" {{ block.shopify_attributes }}>
                <blockquote class="review-content">"{{ block.settings.content }}"</blockquote>
                <p class="review-author">- {{ block.settings.author }}</p>
              </div>
            {% endfor %}
          </div>
          <button class="nav-button next-button">&gt;</button>
          <div class="slider-dots"></div>
        </reviews-slider>
      </div>
    </div>
    <div class="reviews__button {{ section.settings.tw-reviews__button }}">
      <a
        href="{{ section.settings.button_link }}"
        class="button button--primary {{ section.settings.tw-button__link }}"
      >
        {{ section.settings.button_text }}
      </a>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Reviews",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "inline_richtext",
      "id": "overline_heading",
      "label": "Overline Heading",
      "default": "REVIEWS"
    },
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "Our Clients say"
    },
    {
      "type": "range",
      "id": "slide_duration",
      "min": 1,
      "max": 10,
      "step": 0.5,
      "unit": "s",
      "label": "Slide Duration",
      "default": 5
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "inline_richtext",
      "id": "button_text",
      "label": "Button Text",
      "default": "Button"
    },
    {
      "type": "textarea",
      "id": "tw-reviews__container",
      "label": "Container Class",
      "default": "px-[27px]"
    },
    {
      "type": "textarea",
      "id": "tw-reviews__wrapper",
      "label": "Wrapper Class",
      "default": "flex flex-col items-center justify-center text-center gap-16 px-4 py-10 md:p-20"
    },
    {
      "type": "textarea",
      "id": "tw-reviews__content",
      "label": "Content Class"
    },
    {
      "type": "textarea",
      "id": "tw-reviews__overline-heading",
      "label": "Overline Heading Class",
      "default": "mb-4 flex flex-col gap-6"
    },
    {
      "type": "textarea",
      "id": "tw-reviews__logo-wrapper",
      "label": "Logo Wrapper Class"
    },
    {
      "type": "textarea",
      "id": "tw-reviews__logo-icon-wrapper",
      "label": "Logo Icon Wrapper Class",
      "default": "flex justify-center mb-2"
    },
    {
      "type": "textarea",
      "id": "tw-reviews__logo-img",
      "label": "Logo Image Class"
    },
    {
      "type": "textarea",
      "id": "tw-reviews__logo-text",
      "label": "Logo Text Class",
      "default": "font-medium text-mobile-overline md:text-desktop-overline"
    },
    {
      "type": "textarea",
      "id": "tw-reviews__heading",
      "label": "Heading Class",
      "default": "font-semibold text-mobile-heading-2 text-brand-black md:text-desktop-heading-2"
    },
    {
      "type": "textarea",
      "id": "tw-reviews__button",
      "label": "Button Class",
      "default": "border border-brand-black px-6 py-4 w-full md:border-0 md:p-0"
    },
    {
      "type": "textarea",
      "id": "tw-button__link",
      "label": "Button Link Class",
      "default": "font-medium text-mobile-button tracking-[0.025em] md:border border-brand-black md:px-6 py-4 md:text-desktop-button md:tracking-[0.03em]"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "text",
          "id": "author",
          "label": "Author Name",
          "default": "John Doe"
        },
        {
          "type": "textarea",
          "id": "content",
          "label": "Review Content",
          "default": "This product is amazing!"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Reviews",
      "blocks": [
        {
          "type": "review"
        },
        {
          "type": "review"
        },
        {
          "type": "review"
        }
      ]
    }
  ]
}
{% endschema %}
