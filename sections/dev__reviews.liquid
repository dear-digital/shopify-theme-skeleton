<script src="{{ 'reviews-slider.js' | asset_url }}" defer></script>

<style>
  review-item {
    display: none;
  }
  review-item.active {
    display: block;
  }
</style>

<div class="reviews-section {{ section.settings.tw-reviews-section }}">
  <div class="section-content {{ section.settings.tw-section-content }}">
    <div class="section-overline-heading {{ section.settings.tw-section-overline-heading }}">
      <div class="section-overline {{ section.settings.tw-section-overline }}">
        {% render 'icon-google', class: 'flex items-center justify-center' %}
        <p class="{{ section.settings.tw-overline-text }}">{{ section.settings.overline_text }}</p>
      </div>
      <h2 class="{{ section.settings.tw-section-heading }}">
        {{ section.settings.heading }}
      </h2>
    </div>
    <div class="section-slider {{ section.settings.tw-section-slider }}">
      <reviews-slider class="{{ section.settings.tw-reviews-slider }}">
        <button class="arrow left {{ section.settings.tw-arrow-left }}">
          {% render 'icon-left-arrow', class: 'lg:w-[2.3vw] lg:h-[2.3vw]' %}
        </button>
        <div class="slider-content {{ section.settings.tw-slider-content }}">
          {% for block in section.blocks %}
            <review-item class="select-none touch-pan-y {% if forloop.first %}active{% endif %}">
              <q class="{{ section.settings.tw-review-text }}">
                {{- block.settings.review_text -}}
              </q>
              <p class="{{ section.settings.tw-review-author }}">- {{ block.settings.author_name }}</p>
            </review-item>
          {% endfor %}
          <div class="pagination-dots {{ section.settings.tw-pagination-dots }}"></div>
        </div>
        <button class="arrow right {{ section.settings.tw-arrow-right }}">
          {% render 'icon-left-arrow', class: 'lg:w-[2.3vw] lg:h-[2.3vw]' %}
        </button>
      </reviews-slider>
    </div>
  </div>
  <div class="{{ section.settings.tw-section-button }}">
    <a
      href="{{ section.settings.button_link }}"
      class="{{ section.settings.tw-button }}"
    >
      {{- section.settings.button_text -}}
    </a>
  </div>
</div>

{% schema %}
{
  "name": "Reviews",
  "settings": [
    {
      "type": "text",
      "id": "overline_text",
      "label": "Overline Text",
      "default": "REVIEWS"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Our Clients say"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Read Reviews"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "text",
      "id": "tw-reviews-section",
      "label": "Style: Reviews Section",
      "default": "flex flex-col gap-16 px-4 py-10 items-center justify-center"
    },
    {
      "type": "text",
      "id": "tw-section-content",
      "label": "Style: Section Content",
      "default": "flex flex-col items-center justify-center"
    },
    {
      "type": "text",
      "id": "tw-section-overline-heading",
      "label": "Style: Section Overline Heading",
      "default": "flex flex-col gap-6"
    },
    {
      "type": "text",
      "id": "tw-section-overline",
      "label": "Style: Section Overline",
      "default": "flex flex-col gap-2 items-center justify-center"
    },
    {
      "type": "text",
      "id": "tw-overline-text",
      "label": "Style: Overline Text",
      "default": "font-medium text-mobile-overline md:text-desktop-overlines lg:text-[.98vw]"
    },
    {
      "type": "text",
      "id": "tw-section-heading",
      "label": "Style: Section Heading",
      "default": "font-semibold mb-4 text-mobile-heading-2 md:text-desktop-heading-2 lg:text-[3.8vw]"
    },
    {
      "type": "text",
      "id": "tw-section-slider",
      "label": "Style: Section Slider",
      "default": "mx-auto w-full"
    },
    {
      "type": "text",
      "id": "tw-reviews-slider",
      "label": "Style: Reviews Slider",
      "default": "flex items-center justify-center w-full"
    },
    {
      "type": "text",
      "id": "tw-arrow-left",
      "label": "Style: Left Arrow",
      "default": "left-0 lg:left-[-60px] text-3xl z-10 hidden lg:block mr-4"
    },
    {
      "type": "text",
      "id": "tw-arrow-right",
      "label": "Style: Right Arrow",
      "default": "right-0 lg:right-[-60px] text-3xl z-10 hidden lg:block rotate-180 ml-4"
    },
    {
      "type": "text",
      "id": "tw-slider-content",
      "label": "Style: Slider Content",
      "default": "text-center w-full lg:w-1/2 flex-grow"
    },
    {
      "type": "text",
      "id": "tw-review-text",
      "label": "Style: Review Text",
      "default": "review-text mb-4 text-mobile-heading-4 italic md:text-desktop-heading-4 opacity-70 lg:text-[2.6vw] font-extralight"
    },
    {
      "type": "text",
      "id": "tw-review-author",
      "label": "Style: Review Author",
      "default": "review-author mt-4 mb-8 font-medium text-mobile-heading-6 md:text-desktop-heading-6 lg:text-[1.25vw]"
    },
    {
      "type": "text",
      "id": "tw-pagination-dots",
      "label": "Style: Pagination Dots",
      "default": "flex justify-center mt-4"
    },
    {
      "type": "text",
      "id": "tw-section-button",
      "label": "Style: Section Button",
      "default": "section-button text-center w-full"
    },
    {
      "type": "text",
      "id": "tw-button",
      "label": "Style: Button",
      "default": "button px-6 py-4 border-[1px] border-brand-black w-full inline-block md:inline md:w-auto lg:text-[1.12vw]"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Review Text"
        },
        {
          "type": "text",
          "id": "author_name",
          "label": "Author Name"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Reviews",
      "settings": {
        "heading": "Our Clients say",
        "button_text": "Read Reviews"
      },
      "blocks": [
        {
          "type": "review",
          "settings": {
            "review_text": "Great product! Highly recommended.",
            "author_name": "John Doe"
          }
        },
        {
          "type": "review",
          "settings": {
            "review_text": "Excellent service and fast delivery.",
            "author_name": "Jane Smith"
          }
        },
        {
          "type": "review",
          "settings": {
            "review_text": "The quality exceeded my expectations.",
            "author_name": "Bob Johnson"
          }
        }
      ]
    }
  ]
}
{% endschema %}
